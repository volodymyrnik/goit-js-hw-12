{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const imagesCardTemplate = hits =>\n  hits\n    .map(\n      image => `\n          <li class=\"gallery-card\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n              <img\n                class=\"gallery-img\"\n                src=\"${image.webformatURL}\"\n                alt=\"${image.tags}\"\n                loading=\"lazy\"\n              />\n              <div class=\"info\">\n  <div class=\"info-list\">\n    <span class=\"info-item\">Likes</span>\n    <span class=\"info-item-value\">${image.likes}</span>\n  </div>\n  <div class=\"info-list\">\n    <span class=\"info-item\">Views</span>\n    <span class=\"info-item-value\">${image.views}</span>\n  </div>\n  <div class=\"info-list\">\n    <span class=\"info-item\">Comments</span>\n    <span class=\"info-item-value\">${image.comments}</span>\n  </div>\n  <div class=\"info-list\">\n    <span class=\"info-item\">Downloads</span>\n    <span class=\"info-item-value\">${image.downloads}</span>\n  </div>\n</div>\n            </a>\n          </li>`\n    )\n    .join('');\n","import axios from 'axios';\n\nconst API_KEY = '48308649-6275080a65400e008e92230b2';\n\nexport const fetchSearch = (query, currentPage) => {\n  const axiosOptions = {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: currentPage,\n      per_page: 15,\n    },\n  };\n  return axios.get(`https://pixabay.com/api/`, axiosOptions);\n};\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport axios from 'axios';\nimport { imagesCardTemplate } from './js/render-functions';\nimport { fetchSearch } from './js/pixabay-api';\n\nconst searchForm = document.querySelector('.search-form');\nconst formInput = document.querySelector('.search-input');\nconst formBtn = document.querySelector('.search-button');\nconst imagesListEl = document.querySelector('.gallery');\n\nconst loader = document.querySelector('.loader'); // Додати до HTML елемент з класом loader\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\n// Ініціалізація SimpleLightbox\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nlet page = 1;\nlet query = '';\n\nloadMoreBtn.classList.add('is-hidden'); // Приховати кнопку пагінації\n\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n    query = formInput.value.trim();\n\n    if (!query) {\n      iziToast.warning({\n        message: 'Please enter a search term.',\n        position: 'topRight',\n      });\n      return;\n    }\n    page = 1;\n\n    loadMoreBtn.classList.add('is-hidden'); // Приховати кнопку пагінації\n    // Очищення галереї перед новим запитом\n    imagesListEl.innerHTML = '';\n\n    loader.classList.add('active'); // Показати індикатор завантаження\n\n    const response = await fetchSearch(query, page);\n\n    loader.classList.remove('active'); // Приховати індикатор завантаження\n\n    if (response.data.total === 0) {\n      iziToast.info({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n    imagesListEl.insertAdjacentHTML(\n      'beforeend',\n      imagesCardTemplate(response.data.hits)\n    );\n\n    loadMoreBtn.classList.remove('is-hidden'); // Показати кнопку пагінації\n\n    lightbox.refresh(); // Оновити SimpleLightbox\n    if (page * 15 >= response.data.totalHits) {\n      loadMoreBtn.classList.add('is-hidden');\n      loadMoreBtn.removeEventListener('click', onLoadMoreBtnClick);\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    } else {\n      loadMoreBtn.classList.remove('is-hidden');\n      loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n    }\n  } catch (error) {\n    loader.classList.remove('active'); // Приховати індикатор завантаження\n    iziToast.error({\n      message: 'Something went wrong, please try again later.',\n      position: 'topRight',\n    });\n    console.error('Error fetching data:', error);\n  }\n};\n\nconst onLoadMoreBtnClick = async () => {\n  try {\n    page++;\n    loader.classList.add('active'); // Показати індикатор завантаження\n    const response = await fetchSearch(query, page);\n    loader.classList.remove('active'); // Приховати індикатор завантаження\n    imagesListEl.insertAdjacentHTML(\n      'beforeend',\n      imagesCardTemplate(response.data.hits)\n    );\n\n    lightbox.refresh(); // Оновити SimpleLightbox\n    if (page * 15 >= response.data.totalHits) {\n      loadMoreBtn.classList.add('is-hidden');\n      loadMoreBtn.removeEventListener('click', onLoadMoreBtnClick);\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    } else {\n      loadMoreBtn.classList.remove('is-hidden');\n      loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n    }\n    const cardHeight = document\n      .querySelector('.gallery-card')\n      .getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n"],"names":["imagesCardTemplate","hits","image","API_KEY","fetchSearch","query","currentPage","axiosOptions","axios","searchForm","formInput","imagesListEl","loader","loadMoreBtn","lightbox","SimpleLightbox","page","onSearchFormSubmit","event","iziToast","response","onLoadMoreBtnClick","error","cardHeight","err"],"mappings":"owBAAO,MAAMA,EAAqBC,GAChCA,EACG,IACCC,GAAS;AAAA;AAAA,4CAE6BA,EAAM,aAAa;AAAA;AAAA;AAAA,uBAGxCA,EAAM,YAAY;AAAA,uBAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAMGA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,oCAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,oCAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,oCAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,gBAK9C,EACA,KAAK,EAAE,EC/BNC,EAAU,qCAEHC,EAAc,CAACC,EAAOC,IAAgB,CACjD,MAAMC,EAAe,CACnB,OAAQ,CACN,IAAKJ,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACL,EACE,OAAOE,EAAM,IAAI,2BAA4BD,CAAY,CAC3D,ECXME,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAY,SAAS,cAAc,eAAe,EACxC,SAAS,cAAc,gBAAgB,EACvD,MAAMC,EAAe,SAAS,cAAc,UAAU,EAEhDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAG3D,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAChB,CAAC,EACGC,EAAO,EACPX,EAAQ,GAEZQ,EAAY,UAAU,IAAI,WAAW,EAErC,MAAMI,EAAqB,MAAMC,GAAS,CACxC,GAAI,CAIF,GAHAA,EAAM,eAAc,EACpBb,EAAQK,EAAU,MAAM,OAEpB,CAACL,EAAO,CACVc,EAAS,QAAQ,CACf,QAAS,8BACT,SAAU,UAClB,CAAO,EACD,MACD,CACDH,EAAO,EAEPH,EAAY,UAAU,IAAI,WAAW,EAErCF,EAAa,UAAY,GAEzBC,EAAO,UAAU,IAAI,QAAQ,EAE7B,MAAMQ,EAAW,MAAMhB,EAAYC,EAAOW,CAAI,EAI9C,GAFAJ,EAAO,UAAU,OAAO,QAAQ,EAE5BQ,EAAS,KAAK,QAAU,EAAG,CAC7BD,EAAS,KAAK,CACZ,QACE,2EACF,SAAU,UAClB,CAAO,EACD,MACD,CACDR,EAAa,mBACX,YACAX,EAAmBoB,EAAS,KAAK,IAAI,CAC3C,EAEIP,EAAY,UAAU,OAAO,WAAW,EAExCC,EAAS,QAAO,EACZE,EAAO,IAAMI,EAAS,KAAK,WAC7BP,EAAY,UAAU,IAAI,WAAW,EACrCA,EAAY,oBAAoB,QAASQ,CAAkB,EAC3DF,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,IAEDN,EAAY,UAAU,OAAO,WAAW,EACxCA,EAAY,iBAAiB,QAASQ,CAAkB,EAE3D,OAAQC,EAAO,CACdV,EAAO,UAAU,OAAO,QAAQ,EAChCO,EAAS,MAAM,CACb,QAAS,gDACT,SAAU,UAChB,CAAK,EACD,QAAQ,MAAM,uBAAwBG,CAAK,CAC5C,CACH,EAEMD,EAAqB,SAAY,CACrC,GAAI,CACFL,IACAJ,EAAO,UAAU,IAAI,QAAQ,EAC7B,MAAMQ,EAAW,MAAMhB,EAAYC,EAAOW,CAAI,EAC9CJ,EAAO,UAAU,OAAO,QAAQ,EAChCD,EAAa,mBACX,YACAX,EAAmBoB,EAAS,KAAK,IAAI,CAC3C,EAEIN,EAAS,QAAO,EACZE,EAAO,IAAMI,EAAS,KAAK,WAC7BP,EAAY,UAAU,IAAI,WAAW,EACrCA,EAAY,oBAAoB,QAASQ,CAAkB,EAC3DF,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,IAEDN,EAAY,UAAU,OAAO,WAAW,EACxCA,EAAY,iBAAiB,QAASQ,CAAkB,GAE1D,MAAME,EAAa,SAChB,cAAc,eAAe,EAC7B,sBAAqB,EAAG,OAE3B,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,OAAQC,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH,EAEAf,EAAW,iBAAiB,SAAUQ,CAAkB,EACxDJ,EAAY,iBAAiB,QAASQ,CAAkB"}